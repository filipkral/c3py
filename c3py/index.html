<!DOCTYPE html>
<html class='no-js'>
<head>
<meta charset='utf-8'>
<meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
<meta content='width=device-width' name='viewport'>
<title>{{title}}</title>

{{c3css}}

</head>
<body class='antialiased'>

<div class='container'>
<h1>C3 Chart</h1>
<div class='chart'>
<div id='chart'></div>
</div>

<button id="clear">Clear selection</button>
<ul id="selected"></ul>

</div>

{{jqueryjs}}

{{d3js}}

{{c3js}}

<script>
$(document).ready(function(){
    
    var onClearSelectionClicked = function(){
        chart.unselect();
        $('#selected').empty();
    };
    
    var onSelected = function(event){
        //$('#selected').append('<li>{{item}}</li>'.replace('{{item}}', JSON.stringify(event)));
        var selectionList = $('#selected').empty();
        chart.selected().map(function(d){ selectionList.append(JSON.stringify(d)); });
    };
    
    var chart = c3.generate({
    data: {
        xs: { property_value_out: 'property_value_in' },
        url: 'sampledata/data_records.json', mimeType: 'json',
        keys: { value: ['property_value_in', 'property_value_out'] },
        type: 'scatter',
        selection: {
            enabled: true //, multiple: true, draggable: true
        },
        onselected: onSelected,
        onunselected: onSelected
    },
    axis: {
        x: {
            label: 'In',
            tick: {
                fit: false
            }
        },
        y: {
            label: 'Out'
        }
    }
    ,tooltip: {
        contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
            return '<div>' + d[0].name + ": " + d[0].value + '</div>';
        }
        /*,format: {
            title: function (d) { return 'Data ' + d; },
            value: function (value, ratio, id) { return value + ' ' + ratio + ' ' + id; }
        }*/
    }
  });
  
  d3.select('#clear').on('click', onClearSelectionClicked);  
  
  window.chart = chart;
   
});

</script>

</body>
</html>
